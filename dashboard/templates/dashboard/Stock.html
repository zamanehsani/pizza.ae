{% extends 'dashboard/base.html' %}
{% load static %}

{%block css%}
{%endblock css%}

{%block content %}

    <!-- Content Header (Page header) -->
    <section class="content-header">
      <div class="container">
        <div class="row mb-2">
          <div class="col-sm-6">
            <h1>Stock</h1>
          </div>
          <div class="col-sm-6">
            <ol class="breadcrumb float-sm-right">
              <li class="breadcrumb-item"><a href="{% url 'dashboard:dashboard' %}">Home</a></li>
              <li class="breadcrumb-item active">Stock</li>
            </ol>
          </div>
        </div>
      </div><!-- /.container-fluid -->
    </section>

    <!-- Main content -->
    <section class="content">
      <div class="container">
        <div class="row">
          <div class="col-12">
            <!-- /.card -->
            <div class="card rounded-0 border-0 shadow-none">
              <div class="card-header">
                <h3 class="card-title">Stock</h3>
                <a href="{% url 'dashboard:add_stock'%}" class="btn rounded-0 text-white bg-orange float-right pt-0 pb-0"> Enter a new item</a>
              </div>
              <!-- /.card-header -->
              <div class="card-body p-0 pt-1">
                
                <table id="example1" class="table table-striped">
                  <thead class="bg-orange">
                    <tr >
                      <th class="text-white">Date</th>
                      <th class="text-white">Name</th>
                      <th class="text-white">Quantity</th>
                      <th class="text-white">Type</th>
                      <th class="text-white">Price</th>
                      <th class="text-white">Total Price</th>
                      <th class="text-white">Added By</th>
                      {% if perms.dashboard.change_stock or perms.dashboard.delete_stock %}
                      <th class="text-white">Action</th>
                      {%endif%}
                    </tr>
                  </thead>
                  <tbody>
                    {% for obj in object_list  %}
                      <tr>
                        <td>{{obj.date|date:"d M Y"}}</td>
                        <td>{{obj.name|title}}</td>
                        <td>{{obj.quantity}}</td>
                        <td>{{obj.unit_type}}</td>
                        <td>{{obj.Unit_price}}</td>
                        <td>{{obj.totol_price}}</td>
                        <td>{{obj.user|title}}</td>
                        {% if perms.dashboard.change_stock or perms.dashboard.delete_stock %}
                        <td class="text-center"> 
                          {% if perms.dashboard.change_stock %}
                          <a href="{% url 'dashboard:update_stock' obj.id %}" class="mr-3 pt-0 pb-0 text-orange text-decoration-none" title="make changes">
                            <i class="fas fa-edit"></i>
                          </a> 
                          {%endif%}
                          {% if perms.dashboard.delete_stock %}
                          <a href="{% url 'dashboard:delete_stock' obj.id %}" class="pt-0 pb-0 text-danger" 
                            title="Remove the Record. Only the person made entery can remove"><i class="fas fa-trash"></i>
                          </a>
                          {%endif%}
                        </td>
                        {%endif%}
                      </tr>

                      {% endfor %}
                  </tbody>
                  <tfoot class="bg-orange">
                  <tr>
                    <th class="text-white">Date</th>
                    <th class="text-white">Name</th>
                    <th class="text-white">Quantity</th>
                    <th class="text-white">Type</th>
                    <th class="text-white">Price</th>
                    <th class="text-white">Total Price</th>
                    <th class="text-white">Added by</th>
                    {% if perms.dashboard.change_stock or perms.dashboard.delete_stock %}
                    <th class="text-white">Action</th>
                    {%endif%}
                  </tr>
                  </tfoot>
                </table>
              </div>
              <!-- /.card-body -->
            </div>
            <!-- /.card -->
          </div>
        </div>
        <!-- /.row -->
        <!-- /.row -->
      </div><!-- /.container-fluid -->
    </section>
    <!-- /.content -->


  {% endblock content %}

  {%block js%}
  {%endblock js%}