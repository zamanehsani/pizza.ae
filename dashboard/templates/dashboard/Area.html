{% extends 'dashboard/base.html' %}
{% load static %}

{% block css %}
<!-- leaflet css file -->
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css"
integrity="sha512-xodZBNTC5n17Xt2atTPuE1HxjVMSvLVW9ocqUKLsCC5CXdbqCmblAshOMAS6/keqq/sMZMZ19scR4PsZChSR7A=="
crossorigin=""/>
 <!-- Make sure you put this AFTER Leaflet's CSS -->
 <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"
   integrity="sha512-XQoYMqMTK8LvdxXYG3nZ448hOEQiglfqkJs1NOQV44cWnUrBc8PkAOcXy20w0vlaXaVUearIOBhiXZ5V3ynxwA=="
   crossorigin=""></script>

<style>
    /* Set the size of the div element that contains the map */
#map {
  height: 70vh;
  /* The height is 400 pixels */
  width: 100%;
  /* The width is the width of the web page */
}

</style>

{% endblock css %}


{% block content %}
    <!-- Content Header (Page header) -->
    <div class="content-header">
        <div class="container">
          <div class="row mb-2">
            <div class="col-sm-6">
              <h1 class="m-0"> Dashboard <small> coverage area</small></h1>
            </div><!-- /.col -->
            <div class="col-sm-6">
              <ol class="breadcrumb float-sm-right">
                <li class="breadcrumb-item"><a href="{% url 'dashboard:dashboard' %}">Home</a></li>
                <li class="breadcrumb-item active"> Area</li>
              </ol>
            </div><!-- /.col -->
          </div><!-- /.row -->
        </div><!-- /.container-fluid -->
      </div>
      <!-- /.content-header -->
  
      <!-- Main content -->
      <div class="content">
        <div class="container">
          <!-- Small boxes (Stat box) -->
          <div class="row">
          <!-- <h2>PIZZA.AE location</h2> -->
          
            <div id="map"></div>
       
            <div class="row mt-3">
              <!-- <form method="POST"> {% csrf_token %}
                <input type="hidden" name="geojson" id="geojson">
                <div class="row mb-2">
                  <div class="col">
                    <div class="">
                      <input class="form-control" required placeholder="name of area" type="text" name="name">
                    </div>
                  </div>
                  <div class="col">
                    <div class="">
                      <input class="form-control" required placeholder="minimum order" type="number" name="min_order">
                    </div>
                  </div>
                  <div class="col">
                    <div class="">
                      <input class="form-control" required placeholder="delivery charge" type="number" name="charge">
                    </div>
                  </div>
                  <div class="col">
                    <div class="">
                      <input type="submit" class="btn btn-primary form-control" value="Add">
                    </div>
                  </div>
                </div>
              </form> -->
            </div>

          </div>
        </div><!-- /.container -->
      </div>
      <!-- /.content -->



{% endblock content %}


{% block js %}

<!-- leaflet js file -->

<script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>

<script src="https://unpkg.com/@turf/turf@6/turf.min.js"></script>
<script src="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-draw/v1.2.2/mapbox-gl-draw.js"></script>
<link rel="stylesheet" href="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-draw/v1.2.2/mapbox-gl-draw.css" type="text/css">

 <!-- Async script executes immediately and must be after any DOM elements used in callback. -->
 <script>

 const apiKey = "pk.eyJ1IjoiemFtYW5laHNhbmkiLCJhIjoiY2tzMngweHBoMDR6bDJwbGxwemdtcWdlYyJ9.In0ho8b2jje9pF86SKSUVA"

//  googlemapapikeey="https://maps.googleapis.com/maps/api/js?key=AIzaSyBgHueCAXFtslQE1riwlgiwZsbxglhOB04&callback=initMap&libraries=&v=weekly";\

// load the mapbox map loader
var mymap = L.map('map').setView([25.1564378,55.2023781], 12);

// add map 
L.tileLayer('https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token={accessToken}', {
    maxZoom: 18,
    id: 'mapbox/streets-v11',
    tileSize: 512,
    zoomOffset: -1,
    accessToken: apiKey
}).addTo(mymap);

// make the pizza marker shop
const pizzaShop = L.marker([25.156442505771384, 55.20456662639172]).addTo(mymap);
pizzCard = `
  <div style="padding:0px; margin:0px;"> 
    <img src="../../static/img/pizzashop.jpg" style="width:100%;margin:0px;">
    <span>We have the best pizza in Dubai.</span>
    <a href="https:pizza.ae">Order here</a>
  </div>
`;

pizzaShop.bindPopup(pizzCard);
// pizzaShop.openPopup();


// request to area coverage url and get all the geojson of areas via ajax

const area_one_polygon = L.polygon([
  [25.156442505771384, 55.20456662639172],
  [25.1713658,55.2166653],
  [25.1545398,55.2126203]
], {
  color:'green',
}).addTo(mymap);


</script>

{% endblock js %}